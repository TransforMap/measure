[tox]
package=datapackage_pipelines_measure
skip_missing_interpreters=true
envlist=
  py36

[testenv]
deps=
  mock
  requests-mock
  pytest
  pytest-cov
  coverage
  -rtest_requirements.txt
passenv=
  CI
  TRAVIS
  TRAVIS_JOB_ID
  TRAVIS_BRANCH
setenv=
  MEASURE_TESTING=true
  MEASURE_TIMESTAMP_DEFAULT_FORMAT=%Y-%m-%dT%H:%M:%SZ
  MEASURE_GITHUB_API_BASE_URL=https://api.github.com/repos/
  MEASURE_GITHUB_API_TOKEN=fake_token
  MEASURE_TWITTER_API_CONSUMER_KEY=fake
  MEASURE_TWITTER_API_CONSUMER_SECRET=fake
  MEASURE_FACEBOOK_API_ACCESS_TOKEN_MYPAGE=fake
  MEASURE_GOOGLE_API_PROJECT_ID=fake
  MEASURE_GOOGLE_API_JWT_CLIENT_ID=fake
  MEASURE_GOOGLE_API_JWT_TYPE=service_account
  MEASURE_GOOGLE_API_JWT_CLIENT_EMAIL=fake@example.com
  MEASURE_GOOGLE_API_JWT_PRIVATE_KEY_ID=fake
commands=
  py.test \
    --cov {[tox]package} \
    --cov-config tox.ini \
    --cov-report term-missing \
    {posargs}
